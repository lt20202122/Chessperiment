@import "tailwindcss";
@config "../../tailwind.config.js";
@variant dark (&:where(.dark, .dark *));
@import "tw-animate-css";
@plugin "tailwindcss-animate";

@theme {
  --color-bg: var(--bg);
  --color-islands: var(--islands);
  --color-text: var(--text);
  --color-accent: var(--accent);
  --color-accent-hover: var(--accent-hover);
}

:root {
  /* Common variables */
  --bg: #f5f5f7;
  --islands: #ececef;
  --text: #1c1c1e;
  --accent: #5e5ce6;
  --accent-hover: #4848d1;

  /* Modern oklch values with fallback logic */
  @supports (color: oklch(0% 0 0)) {
    --bg: oklch(96% 0.008 240);
    --islands: oklch(92% 0.015 240);
    --text: oklch(20% 0.03 240);
    --accent: oklch(58% 0.18 250);
    --accent-hover: oklch(53% 0.18 250);
  }
}

.dark {
  --bg: #1c1c1e;
  --islands: #2c2c2e;
  --text: #e5e5e7;
  --accent: oklch(68.1% 0.162 75.834);
  --accent-hover: oklch(79.5% 0.184 86.047);

  @supports (color: oklch(0% 0 0)) {
    --accent: oklch(68.1% 0.162 75.834);
    --accent-hover: oklch(79.5% 0.184 86.047);
  }
}

body {
  background-color: var(--bg);
  /* Simplify background to prevent GPU glitches on mobile */
  background-image: none;
  background-attachment: scroll;
}

/* Only apply complex gradients on larger screens with better GPUs */
@media (min-width: 1024px) {
  body {
    background-image:
      radial-gradient(circle at center, transparent 0%, var(--bg) 100%),
      linear-gradient(hsla(240, 10%, 50%, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, hsla(240, 10%, 50%, 0.1) 1px, transparent 1px);
    background-size:
      100% 100%,
      40px 40px,
      40px 40px;
    background-attachment: fixed;
  }
}

.shadow-islands:hover {
  box-shadow:
    2.5px 2px 10px rgba(0, 0, 0, 0.2),
    10px 10px 15px rgba(0, 0, 0, 0.1);
}

.link-underline-regular {
  @apply relative lg:mx-4 transition-colors duration-300 ease-in-out
          before:absolute before:bottom-0 before:left-0 before:h-0.5 before:w-0 before:bg-amber-400 
          before:transition-all before:duration-300 hover:before:w-full inline h-6 text-sm
           caret-transparent cursor-pointer;
}
.pseudos-links-regular {
  @apply active:text-amber-600 transition-colors duration-250;
}
